{"ast":null,"code":"import _classCallCheck from \"/mnt/c/users/iasonas/foodshare-assignment/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/users/iasonas/foodshare-assignment/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/users/iasonas/foodshare-assignment/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/users/iasonas/foodshare-assignment/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/users/iasonas/foodshare-assignment/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { getJwt } from '../helpers';\n\nvar AuthComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AuthComponent, _Component);\n\n  function AuthComponent(props) {\n    var _this;\n\n    _classCallCheck(this, AuthComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthComponent).call(this, props));\n    _this.state = {\n      user: undefined\n    };\n    return _this;\n  }\n\n  _createClass(AuthComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUser();\n    }\n  }, {\n    key: \"getUser\",\n    value: function getUser() {\n      var _this2 = this;\n\n      var jwt = getJwt();\n\n      if (!jwt) {\n        this.setState({\n          user: null\n        });\n        return;\n      }\n\n      axios.get('/auth/getUser', {\n        headers: {\n          Authorization: getJwt()\n        }\n      }).then(function (res) {\n        _this2.setState({\n          user: res.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var user = this.state.user;\n\n      if (user === null) {\n        this.props.history.push('/login');\n      }\n\n      return this.props.children;\n    }\n  }]);\n\n  return AuthComponent;\n}(Component);\n\nexport default withRouter(AuthComponent);","map":{"version":3,"sources":["/mnt/c/users/iasonas/foodshare-assignment/client/src/components/Auth.js"],"names":["React","Component","axios","withRouter","getJwt","AuthComponent","props","state","user","undefined","getUser","jwt","setState","get","headers","Authorization","then","res","data","history","push","children"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,MAAT,QAAuB,YAAvB;;IAEMC,a;;;;;AACJ,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,uFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAEC;AADK,KAAb;AAFiB;AAKlB;;;;wCAEmB;AAClB,WAAKC,OAAL;AACD;;;8BAES;AAAA;;AACR,UAAMC,GAAG,GAAGP,MAAM,EAAlB;;AACA,UAAI,CAACO,GAAL,EAAU;AACR,aAAKC,QAAL,CAAc;AACZJ,UAAAA,IAAI,EAAE;AADM,SAAd;AAGA;AACD;;AAEDN,MAAAA,KAAK,CAACW,GAAN,CAAU,eAAV,EAA2B;AAAEC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAEX,MAAM;AAAvB;AAAX,OAA3B,EAAqEY,IAArE,CAA0E,UAAAC,GAAG,EAAI;AAC/E,QAAA,MAAI,CAACL,QAAL,CAAc;AACZJ,UAAAA,IAAI,EAAES,GAAG,CAACC;AADE,SAAd;AAGD,OAJD;AAKD;;;6BAEQ;AAAA,UACCV,IADD,GACU,KAAKD,KADf,CACCC,IADD;;AAIP,UAAIA,IAAI,KAAK,IAAb,EAAmB;AACjB,aAAKF,KAAL,CAAWa,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACD;;AAED,aAAO,KAAKd,KAAL,CAAWe,QAAlB;AACD;;;;EArCyBpB,S;;AAwC5B,eAAeE,UAAU,CAACE,aAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { getJwt } from '../helpers';\r\n\r\nclass AuthComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: undefined\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getUser();\r\n  }\r\n\r\n  getUser() {\r\n    const jwt = getJwt();\r\n    if (!jwt) {\r\n      this.setState({\r\n        user: null\r\n      });\r\n      return;\r\n    }\r\n\r\n    axios.get('/auth/getUser', { headers: { Authorization: getJwt() } }).then(res => {\r\n      this.setState({\r\n        user: res.data\r\n      })\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n\r\n\r\n    if (user === null) {\r\n      this.props.history.push('/login');\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default withRouter(AuthComponent);"]},"metadata":{},"sourceType":"module"}